import random as r
import os as o

#Template: 
# maze = [["#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"],
#         ["#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"],
#         ["#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"],
#         ["#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"],
#         ["#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"],
#         ["#","#","#","#","#","#","#","#","#","#","#","#","#","p","#","#","#","#","#","#","#","#","#","#","#","#","#"],
#         ["#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"],
#         ["#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"],
#         ["#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"],
#         ["#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"],
#         ["#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"]]

def generate_maze():
    #Select premade winning paths
    maze = [[]]
    random_path = r.randint(1,5)
    if random_path == 1:
        maze = [["#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"],
                ["#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"],
                ["#","#","#","#","#","#","#","#"," "," "," "," ","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"],
                ["#","#","#","#","#","#","#","#"," ","#","#"," "," ","#","#","#","#","#","#","#","#","#","#","#","#","#","#"],
                ["#","#","#"," "," "," ","#","#"," ","#","#","#"," ","#","#","#","#","#","#","#","#","#","#","#","#","#","#"],
                ["#","#","#"," ","#"," ","#","#"," ","#","#","#"," ","p","#","#","#","#","#","#","#","#","#","#","#","#","#"],
                ["#","#","#"," ","#"," "," "," "," ","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"],
                ["#","#","#"," ","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"],
                ["#","#","#"," "," ","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"],
                ["#","#","#","#"," ","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"],
                ["#","#","#","#"," ","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"]]
    elif random_path == 2:
        maze = [["#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"],
                ["#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"],
                ["#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"],
                ["#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"," "," "," ","#","#","#","#","#","#","#","#"],
                ["#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"," ","#"," ","#"," "," "," "," ","#","#","#"],
                ["#","#","#","#","#","#","#","#","#","#","#","#","#","p","#","#"," ","#"," ","#"," ","#","#"," ","#","#","#"],
                ["#","#","#","#","#","#","#","#","#","#","#","#","#"," ","#","#"," ","#"," "," "," ","#","#"," "," ","#","#"],
                ["#","#","#","#","#","#","#","#","#","#","#","#","#"," ","#"," "," ","#","#","#","#","#","#","#"," ","#","#"],
                ["#","#","#","#","#","#","#","#","#","#","#","#","#"," ","#"," ","#","#","#","#","#","#","#","#"," "," ","#"],
                ["#","#","#","#","#","#","#","#","#","#","#","#","#"," "," "," ","#","#","#","#","#","#","#","#","#"," ","#"],
                ["#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"," ","#"]]
    elif random_path == 3:
        maze = [["#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"],
                ["#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"],
                ["#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"," "," "," "," "," ","#","#","#","#","#"],
                ["#","#","#","#","#","#","#","#","#","#","#"," "," "," ","#","#","#"," ","#","#","#"," ","#","#","#","#","#"],
                ["#","#","#","#","#","#","#","#","#","#","#"," ","#"," ","#","#","#"," ","#","#","#"," ","#","#","#","#","#"],
                ["#","#","#","#","#","#","#","#","#","#","#"," ","#","p","#","#","#"," "," "," ","#"," ","#","#","#","#","#"],
                ["#","#","#","#","#","#","#","#","#","#","#"," ","#","#","#","#","#","#","#"," ","#"," ","#","#","#","#","#"],
                ["#","#","#","#","#","#","#","#","#","#","#"," ","#","#","#","#","#","#","#"," ","#"," ","#","#","#","#","#"],
                ["#","#","#","#","#","#","#","#","#","#","#"," "," "," "," "," "," ","#","#"," ","#"," ","#","#","#","#","#"],
                ["#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"," "," "," "," ","#"," ","#","#","#","#","#"],
                ["#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"," ","#","#","#","#","#"]]
    elif random_path == 4:
        maze = [["#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"],
                ["#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"],
                ["#","#","#","#","#","#","#","#","#","#","#"," "," "," "," "," "," ","#","#","#","#","#","#","#","#","#","#"],
                ["#","#","#","#","#","#","#","#","#","#","#"," ","#","#","#","#"," ","#","#","#","#","#","#","#","#","#","#"],
                ["#","#","#"," "," "," "," "," "," "," "," "," ","#","#","#","#"," ","#","#","#","#","#","#","#","#","#","#"],
                ["#","#","#"," ","#","#","#","#","#","#","#","#","#","p"," "," "," ","#","#","#","#","#","#","#","#","#","#"],
                ["#","#","#"," "," "," "," ","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"],
                ["#","#","#","#","#","#"," ","#"," "," "," ","#","#","#"," "," "," "," "," ","#","#","#","#","#","#","#","#"],
                ["#","#","#","#","#","#"," "," "," ","#"," ","#","#","#"," ","#","#","#"," ","#","#","#","#","#","#","#","#"],
                ["#","#","#","#","#","#","#","#","#","#"," "," "," "," "," ","#","#","#"," ","#","#","#","#","#","#","#","#"],
                ["#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"," ","#","#","#","#","#","#","#","#"]]
    elif random_path == 5:
        maze = [["#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"],
                ["#","#","#","#","#","#","#"," "," "," ","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"],
                ["#","#"," "," "," "," ","#"," ","#"," ","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"],
                ["#","#"," ","#","#"," "," "," ","#"," ","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"],
                ["#","#"," ","#","#","#","#","#","#"," ","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"],
                ["#","#"," ","#","#","#","#","#","#"," "," "," "," ","p","#","#","#","#","#","#","#","#","#","#","#","#","#"],
                ["#","#"," ","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"],
                ["#","#"," "," "," "," ","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"],
                ["#","#","#","#","#"," ","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"],
                [" "," "," "," "," "," ","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"],
                ["#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"]]

    #Generate random paths
    for i in range(1,10):
        for j in range(1,26):
            if r.randint(1,3) == 2 and maze[i][j] == "#":
                maze[i][j] = " "
    return maze

def find_exit(maze):
    for i in range(27):
        if maze[0][i] == " ":
            return [0,i]
    for i in range(11):
        if maze[i][0] == " ":
            return [i,0]
    for i in range(11):
        if maze[i][26] == " ":
            return [i,26]
    for i in range(27):
        if maze[10][i] == " ":
            return [10,i]

#Find player
def find_player(maze):
    for i in range(11):
        for j in range(27):
            if maze[i][j] == "p":
                return [i,j]

#Print the maze
def print_maze(maze):
    for i in range(11):
        lane_to_print = ""
        for j in range(27):
            lane_to_print += maze[i][j]
        print(lane_to_print)

def movement(maze, move_button):
    current_pos = find_player(maze)
    if move_button == "w":
        if maze[current_pos[0] - 1][current_pos[1]] != "#":
            return [current_pos[0] - 1,current_pos[1]]
        else:
            return "Not possible"
    elif move_button == "s":
        if maze[current_pos[0] + 1][current_pos[1]] != "#":
            return [current_pos[0] + 1,current_pos[1]]
        else:
            return "Not possible"
    elif move_button == "a":
        if maze[current_pos[0]][current_pos[1] - 1] != "#":
            return [current_pos[0],current_pos[1] - 1]
        else:
            return "Not possible"
    elif move_button == "d":
        if maze[current_pos[0]][current_pos[1] + 1] != "#":
            return [current_pos[0],current_pos[1] + 1]
        else:
            return "Not possible"
    else:
        return "Not possible"

def main():
    print("Press enter to play:")
    input()
    o.system("cls")
    playing = True
    move = ""
    valid_move = False
    generated_level = generate_maze()
    maze_exit = find_exit(generated_level)
    while playing == True:
        valid_move = False
        current_pos = find_player(generated_level)
        if current_pos == maze_exit:
            playing = False
            o.system("cls")
            print("Congrats on completing the maze")
            print("Thanks for playing!")
            return ""
        else:
            print_maze(generated_level)
            while valid_move == False:
                move = ""
                while move.lower() not in ("w","s","a","d"):
                    move = input("(W = Up, S = Down, A = Left, D = Right) Where would you like to go")
                new_pos = movement(generated_level,move)
                if new_pos != "Not possible":
                    print(f"Current = {current_pos}")
                    print(f"New = {new_pos}")
                    generated_level[current_pos[0]][current_pos[1]] = " "
                    current_pos = new_pos
                    generated_level[current_pos[0]][current_pos[1]] = "p"
                    valid_move = True
                    o.system("cls")
                else:
                    print("Game returned an error")
                    break
            
        

main()